a <- list(1,2,3)
map(.x=a, .f=x*1.1)
map(.x=a, .f=function(x) x*1.1)
a <- list(1,2,3)
b <- list(10,20,30)
map2(.x=a, .y=b, .f=function(first, second) second - first)
map2(.x=a, .y=b, .f=~.y-x)
map2(.x=a, .y=b, .f=~.y-.x)
map2_dbl(a, b, ~.y-.x)
map2_dbl(a, b, ~.y-.x)
set.seed(123)
map2(b,a,rnorm)
?rnorm
map2(b,a,rnorm, n=5)
set.seed(123)
list(rnorm(mean=10, sd=1, n=5),
rnorm(mean=20, sd=2, n=5),
rnorm(mean=30, sd=3, n=5))
str(mtcars)
by.am <-  mtcars %>%
split(.$am)
by.am
models <- by.am %>%
map(~lm(mpg ~wt, data=.))
models
map2(models, by.am, predict)
list(predict(models$`0`))
list(predict(models$`0`, by.am$`0`),
predict(models$`1`, by.am$`1`))
pmap(.l=list(a,b,c), .f=sum)
c <- list(100,200,300)
pmap(.l=list(a,b,c), .f=sum)
pmap_dbl(.l=list(a,b,c), .f=sum)
pmap(list(a,b,c),
function(first, second, third)
second - first +third)
pmap(list(a,b,c), ~..2-..1+..3)
pmap_dbl(list(alpha=a, beta=b, gamma=c),
function(gamma,beta, alpha)
beta - alpha + gamma)
plus <- function(x,y) x+ y
pmap_dbl(list(a,b,c), plus)
pmap_dbl(list(a,b,c), plus2)
plus2 <- function(x,y, ...) x+ y
pmap_dbl(list(a,b,c), plus2)
args <- list(mean=c(0, 5, 10),
sd=c(1,2,3),
n=c(1,3,5))
set.seed(123)
args %>%
pmap(rnorm)
set.seed(123)
list(rnorm(mean=0, sd=1, n=1),
rnorm(mean=5, sd=2, n=3),
rnorm(mean=10, sd=3, n=5))
args.df <- data.frame(mean=c(0, 5, 10),
sd=c(1,2,3),
n=c(1,3,5))
set.seed(123)
args.df %>%
pmap(rnorm)
args2 <- list(c(0, 5, 10),
c(1,2,3),
c(1,3,5))
args2 %>%
pmap(rnorm)
rm(list = ls())
reduce(.x=c(1,3,5,7), .f=`*`)
((1*3)*5)*7
paste2 <- function(u, v, sep=".") paste(u,v,sep=sep)
letters[1:4] %>%
reduce(paste2)
dfs <- list(data.frame(name="Superman", age=30),
data.frame(name=c("Spiderman", "Wonderwoman"),
sex=c("M","F")),
data.frame(name="Batman", grade="A"))
dfs
library(dplyr)
dfs %>%
reduce(bind_rows)
vs <- list(c(1,3,5,6,7,8,10),
c(2,3,7,8,10),
c(1,2,3,5,7,9,10))
vs
vs %>%
reduce(intersect)
set.seed(123)
x <- sample(10)
x
x %>%
reduce(`+`)
x %>%
accumulate(`+`)
reduce2(.x=letters[1:4], .y=c("-", ".", "-"), .f=paste2)
accumulate2(.x=letters[1:4], .y=c("-", ".", "-"), .f=paste2)
rm(list = ls())
head(airquality)
library(dplyr)
filter(airquality, Month==6)
air <- filter(airquality, Month==6)
airquality[airquality$Month==6,]
airquality[airquality$Month==6,]
subset(airquality, subset=(Month==6))
airquality$Month==6,
airquality$Month==6
air <- filter(airquality, Month==6, Temp > 90)
head(air)
air <- filter(airquality, Month==6, Ozone > 80|Temp > 90)
head(air)
slice(airquality, 6:10)
slice(airquality, n())
slice(airquality, (n()-4):n())
air <- arrange(airquality, Temp, Month, Day)
head(air)
air <- arrange(airquality, desc(Temp), Month, Day)
head(air)
air <- select(airquality, Month, Day, Temp)
head(air)
air
air <- select(airquality, Temp:Day)
head(air)
air <- select(airquality, -(Temp:Day))
head(air)
air <- select(airquality, Solar=Solar.R)
head(air)
air <- rename(airquality, Solar=Solar.R)
head(air)
select(airquality, Month)
distinct(select(airquality, Month))
air <- mutate(airquality,
Temp.C=(Temp-32)/1.8,
Diff= Temp.C-mean(Temp.C))
head(air)
summarise(airquality)
summary(airquality)
summarise(airquality,
mean(Temp))
summarise(airquality,
mean(Temp, na.rm=TRUE),
median(Temp, na.rm=TRUE),
sd(Temp, na.rm=TRUE),
max(Temp, na.rm=TRUE),
min(Temp, na.rm=TRUE))
summarise(airquality,
Mean=mean(Temp, na.rm=TRUE),
Median=median(Temp, na.rm=TRUE),
SD=sd(Temp, na.rm=TRUE),
Max=max(Temp, na.rm=TRUE),
Min=min(Temp, na.rm=TRUE))
summarise(airquality,
Mean=mean(Temp, na.rm=TRUE),
Median=median(Temp, na.rm=TRUE),
SD=sd(Temp, na.rm=TRUE),
Max=max(Temp, na.rm=TRUE),
Min=min(Temp, na.rm=TRUE),
n(),
n_distinct(Month),
first(Month),
last(Month))
summarise(airquality,
Mean=mean(Temp, na.rm=TRUE),
Median=median(Temp, na.rm=TRUE),
SD=sd(Temp, na.rm=TRUE),
Max=max(Temp, na.rm=TRUE),
Min=min(Temp, na.rm=TRUE),
N=n(),
Distinct.Month=n_distinct(Month),
Distinct.First=first(Month),
Distinct.Last=last(Month))
sample_frac(airquality, 0.05)
sample_n(airquality, 5)
sample_frac(airquality, 0.05, replace=TRUE)
air.group <- group_by(airquality, Month)
class(air.group)
head(air.group)
air.group
summarise(air.group)
summarise(air.group,
Mean.Temp=mean(Temp, na.rm=TRUE))
summarise(air.group,
Mean.Temp=mean(Temp, na.rm=TRUE),
SD.Temp=sd(Temp, na.rm=TRUE),
Days=n())
iris %>% head
1:10 %>% mean
select(airquality, Ozone, Temp, Month)
a1 <- select(airquality, Ozone, Temp, Month)
group_by(a1, Month)
a2 <- group_by(a1, Month)
a3 <- summarise(a2,
Mean.Ozone=mean(Ozone, na.rm=T),
Mean.Temp=mean(Temp, na.rm=T))
a3
filter(a3, Mean.Ozone > 40 | Mean.Temp > 80)
a4 <- filter(a3, Mean.Ozone > 40 | Mean.Temp > 80)
ar
a4
air <- airquality %>%
select(Ozone, Temp, Month) %>%
group_by(Month) %>%
summarise(Mean.Ozone=mean(Ozone, na.rm=T),
Mean.Temp=mean(Temp, na.rm=T)) %>%
filter(Mean.Ozone > 40 | Mean.Temp > 80)
air
rm(list=ls())
dfl <- data.frame(x1:6, y=month.name[1:6])
dfl <- data.frame(x=1:6, y=month.name[1:6])
df2 <- data.frame(x=7:12, y=month.name[7:12])
df1
dfl <- data.frame(x=1:6, y=month.name[1:6])
df2 <- data.frame(x=7:12, y=month.name[7:12])
df1
df2
df1 <- data.frame(x=1:6, y=month.name[1:6])
df1
df2
df3 <- bind_rows(df1, df2)
df3
rbind(df1, df2)
df4 <- data.frame(z=month.abb)
df4
df5 <- bind_cols(df3, df4)
df5
cbind(df3, df4)
band_members
band_instruments
inner_join(x=band_members, y=band_instruments)
inner_join(x=band_members, y=band_instruments, by="name")
left_join(x=band_members, y=band_instruments, by="name")
right_join(x=band_members, y=band_instruments, by="name")
full_join(x=band_members, y=band_instruments, by="name")
band_instruments2
full_join(band_members, band_instruments2, by=c("name"="artist"))
full_join(band_members, band_instruments2, by=c("name"="artist", keep=T))
full_join(band_members, band_instruments2, by=c("name"="artist", keep=TRUE))
full_join(band_members, band_instruments2, by=c("name"="artist"), keep=TRUE)
full_join(band_members, band_instruments2, by=c("name"="artist"), keep=T)
semi_join(x=band_members, y=band_instruments, by="name")
anti_join(x=band_members, y=band_instruments, by="name")
install.packages("reshape2")
library(reshape2)
smith
smiths
melt(data=smiths)
?melt
melt(data=smiths,
id.vars = "subject")
melt(data=smiths,
measure.vars = c(2:5))
melt(data=smiths,
measure.vars = c("time","age","weight","height"))
melt(data=smiths,
id.vars = "subject",
measure.vars = c("time","age","weight","height"))
melt(data=smiths,
id.vars = "subject",
measure.vars = c("time","age","weight","height"),
variable.name = "var",
value.name = "val")
smiths.long <- melt(data=smiths,
id.vars = "subject",
measure.vars = c("time","age","weight","height"),
variable.name = "var",
value.name = "val")
smiths.long
?dcast
dcast(data=smiths.long, formula=subject ~ var)
head(airquality)
dcast(data=smiths.long, formula=subject ~ var,
value.var = "val")
head(aq.long)
aq.long <- melt(airquality,
id.vars=c("Month", "Day"))
head(aq.long)
tail(aq.long)
aq.wide <- dcast(aq.long,
Month + Day ~ variable,
value.var = "value")
head(aq.wide)
dcast(aq.long, Month ~ variable)
?dcast
dcast(aq.long, Month ~ variable,
fun.aggregate =mean, na.rm=T)
rm(list = ls())
install.packages("tidyr")
library(tidyr)
head(airquality)
?gather
aq.long <- gather(airquality,
key = Factor,
value=Measurement,
Ozone:Temp)
head(aq.long)
aq.long <- gather(airquality,
key = Factor,
value=Measurement,
-Month, -Day)
head(aq.long)
aq.long <- gather(airquality,
key = Factor,
value=Measurement,
1:4)
head(aq.long)
aq.long <- gather(airquality,
key = Factor,
value=Measurement,
Ozone, Solar.R,Wind, Temp)
head(aq.long)
airquality %>% gather(Factor, Measurement, Ozone)
airquality %>% gather(Factor, Measurement, Ozone:Temp)
?spread
spread(data=aq.long, key=Factor, value=Measurement)
aq.wide <- spread(data=aq.long, key=Factor, value=Measurement)
head(aq.wide)
aq.long %>% spread(key=Factor, value=Measurement)
head(iris)
iris.long
iris.long <- gather(iris, Element, Measurement,
-Species)
source("D:/MyWorkspaceR/print.R", echo=TRUE)
head(iris.long)
head(iris)
iris.long <- gather(iris, Element, Measurement,
-Species)
head(iris.long)
?seperate
?separate
iris.sep <- seperate(data=iris.long,
col=Element,
into=c("Part", "Measures"))
head(iris.sep)
iris.sep <- seperate(data=iris.long,
col=Element,
into=c("Part", "Measures"))
head(iris.sep)
iris.sep <- separate(data=iris.long,
col=Element,
into=c("Part", "Measures"))
head(iris.sep)
?unite
iris.unite <- unite(data=iris.sep,
col = Factor,
Part, Measures,
sep="_")
head(iris.unite)
head(airquality)
?pivot_longer
aq.long <- pivot_longer(data=airquality,
cols=Ozone:Temp,
names_to ="Factor" ,
values_to ="Measurement" )
head(aq.long)
?pivot_wider
aq.wide <- pivot_wider(data=aq.long,
names_from=Factor,
values_from=Measurement)
head(aq.wide)
rm(list = ls())
df <- tibble(x=c(1,1,1,2,2,3), y=1:6, z=6:1)
df
df.nested <- nest(.data=df, ndata=c(y, z))
df.nested
df.nested$ndata
df.nested$ndata[[2]]
unnest(df.nested, cols=ndata)
head(iris)
iris %>%
nest(sepal=c("Sepal.Length", "Sepal.width"),
petal=c("Petal.Length", "Petal.width"))
iris.nested <- iris %>%
nest(sepal=c("Sepal.Length", "Sepal.width"),
petal=c("Petal.Length", "Petal.width"))
head(iris)
iris.nested <- iris %>%
nest(sepal=c("Sepal.Length", "Sepal.width"),
petal=c("Petal.Length", "Petal.width"))
unnest(df.nested, cols=ndata)
head(iris)
iris.nested <- iris %>%
nest(sepal=c("Sepal.Length", "Sepal.width"),
petal=c("Petal.Length", "Petal.width"))
iris.nested
df <- tibble(x=c(1,1,1,2,2,3), y=1:6, z=6:1)
df
df.nested <- nest(.data=df, ndata=c(y, z))
df.nested
df.nested$ndata
df.nested$ndata[[2]]
unnest(df.nested, cols=ndata)
head(iris)
iris.nested <- iris %>%
nest(sepal=c("Sepal.Length", "epal.width"),
petal=c("Petal.Length", "Petal.width"))
iris.nested <- iris %>%
nest(sepal=c("Sepal.Length", "Sepal.width"),
petal=c("Petal.Length", "Petal.width"))
iris.nested <- iris %>%
nest(sepal=c("Sepal.Length", "Sepal.width"),
petal=c("Petal.Length", "Petal.width"))
iris.nested <- iris %>%
nest(sepal=c("Sepal.Length", "Sepal.width"),
petal=c("Petal.Length", "Petal.width"))
#tidyr nest
library(tidyr)
iris.nested <- iris %>%
nest(sepal=c("Sepal.Length", "Sepal.width"),
petal=c("Petal.Length", "Petal.width"))
iris %>%
nest(sepal=c("Sepal.Length", "Sepal.Width"),
petal=c("Petal.Length", "Petal.Width"))
iris.nested <- iris %>%
nest(sepal=c("Sepal.Length", "Sepal.Width"),
petal=c("Petal.Length", "Petal.Width"))
iris.nested <- iris %>%
nest(sepal=c("Sepal.Length", "Sepal.width"),
petal=c("Petal.Length", "Petal.width"))
iris.nested$sepal
head(mtcars)
library(dplyr)
mtcars.n <- mtcars %>%
group_by(cyl) %>%
nest()
mtcars.n
mtcars.n$1
mtcars.n$[[1]]
mtcars.n$data
library(purrr)
mtcars.m <- mtcars.n %>%
mutate(model=map(data, ~lm(mpg ~ wt, data=.x)))
mtcars.m <- mtcars.n %>%
mutate(model=map(data, ~lm(mpg ~ wt, data=.x))) %>%
arrange(cyl)
mtcars.m
mtcars.m$model
mtcars.m %>%
transmute(cyl, beta=map_dbl(model, ~coefficients(.)[[2]])) %>%
ungroup()
# graphic
str(faithful)
plot(faithful)
eruptions.long <- faithful[faithful$eruptions > 3, ]
points(eruptions.long, col="red", pch=19)
points(eruptions.long, col="red", pch=18)
points(eruptions.long, col="red", pch=19)
dev.off()
points(eruptions.long, col="red", pch=19)
faithful.lm <- lm(waiting ~ eruptions, data=faithful)
plot(faithful)
points(eruptions.long, col="red", pch=19)
lines(x=faithful$eruptions, y=fitted(faithful.lm), col="blue")
abline(v=3, col="purple")
abline(v=4, col="purple")
dev.off()
plot(faithful)
points(eruptions.long, col="red", pch=19)
lines(x=faithful$eruptions, y=fitted(faithful.lm), col="blue")
abline(v=3, col="purple")
abline(h=mean(faithful$waiting), col="green")
abline(faithful.lm, col="blue")
# generic function
str(cars)
plot(cars$speed, cars$dist)
plot(cars)
plot(cars$speed, cars$dist)
plot(cars)
str(ToothGrowth)
plot(ToothGrowth$supp, ToothGrowth$len,)
plot(ToothGrowth$supp, ToothGrowth$len)
str(iris)
plot(iris[,1:4])
strf(nhtemp)
str(nhtemp)
plot(nhtemp)
str(UCBAdmissions)
plot(UCBAdmissions)
str(faithful)
faithful.lm <- lm(waiting ~ eruptions, data=faithful)
class(faithful.lm)
faithful.lm
plot(faithful.lm)
plot(faithful)
list.files(pattern="sgoi.jpeg")
library(pander)
openFileInOS("sgoi.jpeg")
windows(width=12, height=8)
plot(faithful)
list.files(pattern="sgoi.jpeg")
windows(width=12, height=8)
savePlot(filename = "sgoi", type = "pdf")
list.files(pattern="sgoi.pdf")
openFileInOS("sgoi.pdf")
windows(width=12, height=8)
list.files(pattern="sgoi.jpeg")
library(pander)
openFileInOS("sgoi.jpeg")
windows(width=12, height=8)
?png
?pdf
?postscript
png("sgoi.png", width=648, height = 432)
plot(faithful)
dev.off()
list.files(pattern="sgoi.png")
openFileInOS("sgoi.png")
# 그래프 패러미터 설정
plot(faithful)
# 제목과 축
plot(faithful,
main="Old Faithful Geyser",
sub="Yellowstone National Park",
xlab="Eruption time (minutes)",
ylab="Waiting time (minutes)")
